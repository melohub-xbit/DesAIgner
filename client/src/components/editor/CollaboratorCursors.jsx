import { useEditorStore } from "../../store/editorStore";

const CollaboratorCursors = () => {
  const { userCursors } = useEditorStore();

  return (
    <div className="pointer-events-none absolute inset-0">
      {Array.from(userCursors.entries()).map(([socketId, data]) => (
        <div
          key={socketId}
          className="absolute transition-all duration-100"
          style={{
            left: data.position.x,
            top: data.position.y,
            transform: "translate(-50%, -50%)",
          }}
        >
          {/* Cursor pointer */}
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            className="drop-shadow-lg"
          >
            <path
              d="M5.65376 12.3673L5.46026 12.4196L5.46026 12.4196L5.65376 12.3673ZM9.31526 16.3673L9.12176 16.4196L9.12176 16.4196L9.31526 16.3673ZM13.4997 11.683L13.6462 11.7918L13.7666 11.6661L13.653 11.5357L13.4997 11.683ZM14.1147 14.183L13.9682 14.0742L13.8408 14.2218L13.9879 14.3483L14.1147 14.183ZM5.84626 12.315C5.95706 10.2875 6.86946 8.42464 8.39906 7.06994L8.01686 6.68774C6.32086 8.19834 5.31086 10.2605 5.18826 12.4896L5.84626 12.315ZM8.39906 7.06994C9.92866 5.71524 11.9326 5.00054 13.9637 5.00054V4.34254C11.7007 4.34254 9.50746 5.14754 7.80786 6.65774L8.39906 7.06994ZM13.9637 5.00054C15.9948 5.00054 18.0988 5.71524 19.6284 7.06994L20.0196 6.68774C18.3231 5.14754 16.1298 4.34254 13.8668 4.34254V5.00054ZM19.6284 7.06994C21.158 8.42464 22.0704 10.2875 22.1812 12.315L22.8392 12.4896C22.7166 10.2605 21.7066 8.19834 20.0106 6.68774L19.6284 7.06994ZM22.1812 12.315C22.292 14.3425 21.576 16.3835 20.1596 17.8869L20.5508 18.2691C22.1388 16.5935 22.9348 14.3395 22.8082 12.1196L22.1812 12.315ZM20.1596 17.8869C18.7432 19.3903 16.8148 20.2257 14.7957 20.2257V20.8837C17.0297 20.8837 19.1757 19.9697 20.7218 18.4671L20.1596 17.8869ZM14.7957 20.2257C12.7766 20.2257 10.8482 19.3903 9.43186 17.8869L9.04986 18.2691C10.5959 19.9697 12.7419 20.8837 14.9759 20.8837V20.2257ZM9.43186 17.8869C8.01546 16.3835 7.29946 14.3425 7.41026 12.315L6.75226 12.1196C6.62566 14.3395 7.42166 16.5935 9.00966 18.2691L9.43186 17.8869ZM9.50876 16.315L5.84726 12.315L5.46026 12.4196L9.12176 16.4196L9.50876 16.315ZM13.353 11.5742L9.12176 16.4196L9.50876 16.315L13.7399 11.4696L13.353 11.5742ZM13.9879 14.3483L20.5508 18.2691L20.1596 17.8869L13.5967 13.966L13.9879 14.3483ZM14.2612 14.2918L13.6462 11.7918L13.353 11.5742L13.9682 14.0742L14.2612 14.2918Z"
              fill="#3b82f6"
            />
          </svg>

          {/* User label */}
          <div className="mt-1 px-2 py-1 bg-blue-600 text-white text-xs rounded whitespace-nowrap shadow-lg">
            {data.user.username}
          </div>
        </div>
      ))}
    </div>
  );
};

export default CollaboratorCursors;
